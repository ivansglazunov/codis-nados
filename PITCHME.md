# КодисНадос

#### Типы данных (только typeof). Разница ссылки и данных. Объекты. Правильное чтение. Инструкции и выражения.

---

@snap[midpoint text-left span-90 text-06]

## Синтаксическая конструкция (СК)

Любой код на любом языке состоит из множества СК. Их читает интерпритатор и выполняет в определенном порядке. Для удобства изложения, авторы языков привязывают к определенным конструкциям некоторые наименования. В JS это "выражения" и "инструкции". В HTML это теги и аргументы. В CSS это селекторы и опции. Но все они с точки зрения компилятора и правил чтения являются синтаксическими конструкциями.

В JS любая СК может принимать данные для работы из вложенных СК.

В JS любая СК может иметь свойства:

- Создает, изменяет или удаляет данные. (Меняет данные МД)
- Объявляет, переопределяет или удаляет переменные. (Меняет переменные МП)
- Переходит на определенный участок кода. (Переходит П)
- Возвращает данные во внешнюю СК. (Возвращает данные ВД)

Других действий СК в JS делать не может.
Так выглядит единственный и главный строительный элемент языка JS.

---

@snap[midpoint text-left span-90 text-04]

### Данные

Например строки или числа. Они храняться в памяти. Их можно куда-то передать. У них есть тип данных возвращаемый typeof.

У каждого типа данных есть СК для создания новых данных.

У некоторых типов могут быть особые СК для обращения или изменению их содержимого.

Эти критерии будут рассмотрены при изучении типов данных.

### Ссылки

Например переменные. Они тоже храняться в памяти. Их нельзя передать.

К ней можно обратиться, после чего она вернет те данные на которые ссылается.

Ссылка не является данными, ссылка всегда ссылается на какие-то данные.

Её можно создать, пересоздать или удалить. Её нельзя передать, и у неё нет типа.

### Типы СК

В JS были введены термины для того что бы отличать разные СК между собой.

Есть два термина: выажения и инструкции.

#### Выражения (expression)

Выражение, это универсальная СК, её можно вкладывать в другие СК, в неё могут быть вкложены другие СК.

Любая СК является выражением, но может не являться инструкцией.

#### Инструкции (statement)

СК называется инструкцией если её нельзя вложить в другую СК и она не может возвращать данные. Если инструкцию попытаться вложить в какое либо другое выражение, компилятор выдаст ошибку. Любое выражение может не иметь родительского СК-выражения, но только инструкции в принципе не могут его иметь.

---

@snap[midpoint text-left span-90 text-05]

## string

Тип данных. Хранит в памяти строки из символов.

Считается типом данных так как выражение `typeof(?)` возвращает `"string"` на основе строки.

```js
typeof 'abc'; // вернет "string"
```

#### СК выражение создания строки

`"abc"` или `'abc'`

Компилятор посчитает что это СК выражение создания строки, если была открыта и закрыта двойная или одинарная ковычка посчитает что нужно создать и вернуть строку.

> После ES5 появляются новые СК для создания строк, которые будут рассмотрены в дальнейшем.

@css[text-03]

- ~~МП~~ - Не влияет на переменные.
- ~~П~~ - Не влияет на последовательность выполнения.
- **МД** - Создает строку.
- **ВД** - Возвращает созданные данные во внешнюю СК.

---

@snap[midpoint text-left span-90 text-05]

## number

Тип данных. Хранит числа.

Считается типом данных так как выражение `typeof(?)` возвращает `"number"` на основе числа.

#### СК создания строки

`123` или `0.0123`

Компилятор посчитает что это СК создания числа, если первый символ был числом, и в последовательности не встречается буквенных символов.

@css[text-03]

- ~~МП~~ - Не влияет на переменные.
- ~~П~~ - Не влияет на последовательность выполнения.
- **МД** - Создает число.
- **ВД** - Возвращает созданные данные во внешнюю СК.

---

@snap[midpoint text-left span-90 text-05]

## Выражение typeof

#### Синтаксическая конструкция

```
typeof(?)
```

#### Свойства СК

@css[text-03]

- ~~МП~~ - Не влияет на переменные.
- ~~П~~ - Не влияет на последовательность выполнения.
- **МД** - Создает строку обозначающую тип данных переданых.
- **ВД** - Возвращает данные во внешнюю СК.

#### Пример

```js
typeof 'abc'; // вернет "string"
typeof 123; // вернет "number"
```

---

@snap[midpoint text-left span-90 text-05]

## СК присвоения ссылки

Присваивает некоторые данные справа, некоторой ссылке слева.

Это не единственный синтаксис присвоения.

#### Синтаксическая конструкция

```js
? = ?
```

#### Чтение

- Если компилятором будет найден символ присвоения `=`:
- Выполняет левую часть выражения `?`, получает существующую ссылку.
- Выполняет правую часть выражения `?` и получает данные.
- Присваивает данные из правой части, ссылке в левой части.
- Возвращает данные во внешнюю СК.

#### Свойства СК

@css[text-03]

- ~~П~~ - Не влияет на последовательность выполнения.
- ~~МД~~ - Не меняет данные.
- **МП** - Устанавливает новое значение у ссылки.
- **ВД** - Возвращает данные установленные в ссылку во внешнюю СК.

---

@snap[midpoint text-left span-90 text-05]

#### Простой пример присвоения

```js
a = 123;
```

##### Выполнение вложенных СК

Подготавливаются все данные и ссылки из вложенных СК.

- Выполняет левую часть выражения присвоения `? = ?`, в данном случае `a`. Компилятор временно запоминает найденную ссылку.
- В правой части выражения написана вложенная СК создания числа. Он выполняется отдельно и из него получается результат, в данном случае - созданное число `123`.

##### Выполнение СК присвоения

- Присваивает данные (созданное число `123`) из правой части, ссылке в левой части. Теперь ссылка `a` ссылается на данные `123`.
- Возвращает данные во внешнюю СК. Так как внешней СК нет, их никто не принимает.

---

@snap[midpoint text-left span-90 text-05]

#### Пример двойного присвоения

Здесь представлены больше СК выражений присвоения вложенных друг в друга.

```js
a = b = 123;
```

##### Выполнение вложенных СК

Подготавливаются все данные и ссылки из вложенных СК.

- Выполняет левую часть первого выражения присвоения `a = ?`, в данном случае `a`. Компилятор временно запоминает найденную ссылку.
- Выполняет левую часть второго выражения присвоения `b = 123`, в данном случае `b`. Компилятор временно запоминает найденную ссылку.
- В правой части второго выражения присвоения `b = 123` написана вложенная СК создания числа `123`. Она выполняется отдельно и из неё получается результат её выполнения, в данном случае - созданное число.

##### Выполнение СК присвоения

- Во втором выражении присвоения `b = 123`, из правой части данные `123` присваиваются ссылке из левой части `b`. Теперь ссылка `b` ссылается на данные `123`.
- В первом выражении присвоения `a = ?`, правая часть выражения является другой СК присвоения, результатом работы которого является присвоенное значение, в данном случае `123`. Это значение присваивается ссылке из левой части `a`. Теперь ссылка `a` тоже ссылается на данные `123`.
- `a = ?` Возвращает данные во внешнюю СК. Так как внешней СК нет, их никто не принимает.

---

@snap[midpoint text-left span-90 text-05]

## СК обращения к ссылке

Ссылка обязательно должна начинаться с буквенных символов, что бы компилятор не посчитал это числом. `a1` допустимое имя, `1a` не допустимое.

#### Пример

На предыдущем слайде были присвоены значения для переменных `a` и `b`.

```js
a;
```

Такая констуркция читается:

- Обращение к переменной `a`, и получение её значения.
- Так как нет родительской СК выражения, на этом выполнение заканчивается.

##### Пример комбинации присвоения и обращения к переменным:

```js
c = a;
```

- Компилятор находит ссылку `c`.
- Компилятор находит ссылку `a` и получает оттуда значение (число `123`)
- Присваивает полученное справа значение (число `123`) ссылке `c`. Теперь ссылка `c` ссылается на число `123`.

---

@snap[midpoint text-left span-90 text-06]

## Что такое возвращение данных из СК

- Если выражение СК не является инструкцией, оно может возвращать данные и может быть вложено в другие, родительские СК.
- То что оно возвращает данные, не значит, что их обязательно принимать и с ними что-то делать.
- Если вокруг СК есть другая СК, которая принимает данные из вложенной, то эти данные будут использованы. Если такой нет, то не будут.

```js
a = b = 123;
```

От родителей к детям: `a = ?` родительская СК для `b = 123`. `b = 123` родительская СК для `123`.

От детей к родителям: `123` создает и возвращает число `123` в родительскую СК `b = 123`. `b = 123` присваивает значение `b` и возвращает значение `123` в родительскую СК `a = ?`. `a = ?` присваивает значение `a` и возвращает значение `123`, но так как нет родительской СК на этом последовательность выполнения завершается.

---

@snap[midpoint text-left span-90 text-06]

## Выполнение вложенных СК и приоритетность выполнения

СК могут иметь вложенные СК. Первыми будут выполняться те у которых нет вложенных СК, и процесс выполнения СК компилятором будет двигаться от них к их родитялем пока не дойдет до той СК, у которой нет оборачивающей родительской СК. На этом эта последовательность выполнения СК заканчивается и начнется выполнение следующей после `;`

Каждая из СК читается так:

1. Если все вложенные СК выполнены и из них получены результаты, тогда переход на 2., пункт 1. применяется для не отработанных вложенных СК.
2. Выполняет операцию данной СК (МП (меняет переменные) или П (переходит) или МД (меняет данные) или ВД (возвращает данные)).
3. Возвращает результат выполнения данной СК в родительскую внешнюю СК если такая была и применяет к следующей по приоритетности выполнения СК пункт 1.

---

@snap[midpoint text-left span-90 text-05]

## Инструкция var

> Далее будет рассмотрено, где находяться переменные. Если не создать переменную самостоятельно, то присвоение создаст её в глобальном общедоступном пространстве переменных. Тема видимости переменных будет раскрыта отдельно.

#### Синтаксическая конструкция

```
var n [= v][, n [= v][, n [= v][, n [= v]...]]]
```

- `[= v]` присвоение не обязательно использовать при создании переменной, можно просто создать переменную без значения, поэтому этот синтаксис в квадратных скобках, что традиционно значит опациональность-не обязательность.
- `[, n [= v]]` опционально не обязательное следующее присвоение переменной, более чем одной за одно использование инструкции `var`

#### Свойства СК

- ~~П~~ - Не влияет на последовательность выполнения.
- ~~МД~~ - Не меняет данные.
- ~~ВД~~ - Не возвращает данные так как `var` инструкция.
- **МП** - Заменяет значение у ссылки.

---

@snap[midpoint text-left span-90 text-05]

## Инструкция var

#### Синтаксическая конструкция

```
var n [= v][, n [= v][, n [= v][, n [= v]...]]]
```

#### Чтение

1. Если компилятором будет найдена последовательность `var ?`:
2. Создать переменную указанную в `n`.
3. Если далее следует выражение присвоения `n = v`:

- Выполняет левую часть выражения `n`, получает ссылку, на только что созданную переменную.
- Выполняет правую часть выражения `v` и получает данные.
- Присваивает данные из правой части ссылке в левой части.
- ~~Возвращает данные.~~ Не возвращает данные, так как их некуда возвращать, `var` это инструкция, значит `var` не может иметь родительскую СК-выражение принимающую что-то.

4. Если далее следует `, n`, повторяется с 2 пункта. Инструкция `var` может создать и присвоить более одной переменной за одно применение, если они перечислены через запятую.

---

## Практика

Реальные примеры создания данных, присвоения и переприсвоения переменных.

---

## boolean

---

## object

---

## undefined

---

## function
